<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BindingsImpl.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="packages.html">Packages</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>BindingsImpl.java</h1><a href="BindingsImpl_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 package ajc.data.pure;
00003 
00004 import ajc.*;
00005 import ajc.data.*;
00006 
00007 import java.util.TreeMap;
00008 import java.util.Map;
00009 import java.util.Set;
00010 import java.util.Iterator;
00011 
<a name="l00012"></a><a class="code" href="classBindingsImpl.html">00012</a> <font class="keyword">class </font><a class="code" href="classBindingsImpl.html">BindingsImpl</a> extends <a class="code" href="classDatumImpl.html">DatumImpl</a> implements <a class="code" href="interfaceBindings.html">Bindings</a> {
00013     <font class="keyword">private</font> Map bindingMap;
00014 
00015     BindingsImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceToken.html">Token</a> token, <a class="code" href="interfaceBindable.html">Bindable</a> bindable)<font class="keyword"> </font>{
00016         <font class="keyword">this</font>(factory);
00017         bindingMap.put(token, bindable);
00018     }
00019 
00020     BindingsImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory)<font class="keyword"> </font>{
00021         <font class="keyword">this</font>(factory, <font class="keyword">new</font> TreeMap());
00022     }
00023 
00024     <font class="keyword">private</font> BindingsImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory, Map map)<font class="keyword"> </font>{
00025         super(factory);
00026         bindingMap = map;
00027     }
00028 
<a name="l00029"></a><a class="code" href="classBindingsImpl.html#a0">00029</a>     <font class="keyword">public</font> Map <a class="code" href="interfaceBindings.html#a0">mapValue</a>()<font class="keyword"> </font>{
00030         <font class="keywordflow">return</font> bindingMap;
00031     }
00032 
00033 <font class="comment">//     public Bindings binding(Token token, Bindable bindable) {</font>
00034 <font class="comment">//      Map map = new TreeMap();</font>
00035 <font class="comment">//      map.put(token, bindable);</font>
00036 <font class="comment">//      return new BindingsImpl(factory, map);</font>
00037 <font class="comment">//     }</font>
00038 
<a name="l00039"></a><a class="code" href="classBindingsImpl.html#a1">00039</a>     <font class="keyword">public</font> <a class="code" href="interfaceBindable.html">Bindable</a> <a class="code" href="interfaceBindings.html#a1">bound</a>(<a class="code" href="interfaceToken.html">Token</a> token) throws <a class="code" href="classExceptional.html">Exceptional</a> {
00040         <font class="keywordflow">if</font> (bindingMap.containsKey(token))
00041             <font class="keywordflow">return</font> (<a class="code" href="interfaceBindable.html">Bindable</a>)bindingMap.get(token);
00042         <font class="keywordflow">throw</font> <font class="keyword">new</font> Exceptional(<font class="stringliteral">"No binding found for token "</font> + token.toString(), factory.<a class="code" href="classPureFactory.html#a11">makeEmpty</a>());
00043     }
00044         
00045 
<a name="l00046"></a><a class="code" href="classBindingsImpl.html#a2">00046</a>     <font class="keyword">public</font> <a class="code" href="interfaceBindings.html">Bindings</a> <a class="code" href="interfaceBindings.html#a2">overriding</a>(<a class="code" href="interfaceBindings.html">Bindings</a> bindings)<font class="keyword"> </font>{
00047         Map newMap = <font class="keyword">new</font> TreeMap(bindingMap);
00048         newMap.putAll(bindings.<a class="code" href="interfaceBindings.html#a0">mapValue</a>());
00049         <font class="keywordflow">return</font> <font class="keyword">new</font> BindingsImpl(factory, newMap);
00050     }
00051 
<a name="l00052"></a><a class="code" href="classBindingsImpl.html#a3">00052</a>     <font class="keyword">public</font> <a class="code" href="interfaceBindings.html">Bindings</a> <a class="code" href="interfaceBindings.html#a3">disjointUnion</a>(<a class="code" href="interfaceBindings.html">Bindings</a> bindings)<font class="keyword"> </font>{
00053         Map newMap = <font class="keyword">new</font> TreeMap(bindingMap);
00054         Set keySet = bindings.<a class="code" href="interfaceBindings.html#a0">mapValue</a>().keySet();
00055         <font class="keywordflow">for</font> (Iterator i = keySet.iterator(); i.hasNext();) {
00056             <a class="code" href="interfaceToken.html">Token</a> token = (<a class="code" href="interfaceToken.html">Token</a>)i.next();
00057             <font class="keywordflow">if</font> (newMap.containsKey(token))
00058                 newMap.remove(token);
00059             <font class="keywordflow">else</font>
00060                 newMap.put(token, bindings.<a class="code" href="interfaceBindings.html#a0">mapValue</a>().get(token));
00061         }
00062         <font class="keywordflow">return</font> <font class="keyword">new</font> BindingsImpl(factory, newMap);
00063     }
00064 
<a name="l00065"></a><a class="code" href="classBindingsImpl.html#a4">00065</a>     <font class="keyword">public</font> String toString()<font class="keyword"> </font>{
00066         <font class="keywordflow">return</font> bindingMap.toString();
00067     }
00068 
00069 }
</pre></div>

<hr>
<center>
<i>Action Java Compiler Runtime, written by Tijs van der Storm &copy; 2002. </i>
</center>
