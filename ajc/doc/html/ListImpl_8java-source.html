<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ListImpl.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="packages.html">Packages</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>ListImpl.java</h1><a href="ListImpl_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 package ajc.data.pure;
00003 
00004 import ajc.*;
00005 import ajc.data.*;
00006 
<a name="l00007"></a><a class="code" href="classListImpl.html">00007</a> <font class="keyword">class </font><a class="code" href="classListImpl.html">ListImpl</a> extends <a class="code" href="classDatumImpl.html">DatumImpl</a> implements <a class="code" href="interfaceList.html">List</a> {
00008     <font class="keyword">private</font> <font class="keyword">static</font> <a class="code" href="interfaceList.html">List</a> _empty;
00009 
00010     <font class="keyword">private</font> <a class="code" href="interfaceDataValue.html">DataValue</a> _head;
00011     <font class="keyword">private</font> <a class="code" href="interfaceList.html">List</a> _tail;
00012 
00013     <font class="keyword">static</font> <font class="keywordtype">void</font> init(<a class="code" href="classPureFactory.html">PureFactory</a> factory)<font class="keyword"> </font>{
00014         _empty = <font class="keyword">new</font> ListImpl(factory);
00015     }
00016 
00017     <font class="keyword">static</font> <a class="code" href="interfaceList.html">List</a> empty()<font class="keyword"> </font>{
00018         <font class="keywordflow">return</font> _empty;
00019     }
00020 
00021     <font class="keyword">private</font> ListImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory)<font class="keyword"> </font>{
00022         <font class="keyword">this</font>(factory, null, null);
00023     }
00024 
00025     <font class="keyword">private</font> boolean isEmpty()<font class="keyword"> </font>{
00026         <font class="keywordflow">return</font> <font class="keyword">this</font> == _empty;
00027     }
00028 
00029     ListImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceDataValue.html">DataValue</a> head)<font class="keyword"> </font>{
00030         <font class="keyword">this</font>(factory, head, _empty);
00031     }
00032 
00033     ListImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceDataValue.html">DataValue</a> head, <a class="code" href="interfaceList.html">List</a> tail)<font class="keyword"> </font>{
00034         super(factory);
00035         _head = head;
00036         _tail = tail;
00037     }
00038 
00039 
<a name="l00040"></a><a class="code" href="classListImpl.html#a0">00040</a>     <font class="keyword">public</font> <a class="code" href="interfaceDataValue.html">DataValue</a> <a class="code" href="interfaceList.html#a0">head</a>() throws <a class="code" href="classExceptional.html">Exceptional</a> {
00041         <font class="keywordflow">if</font> (<font class="keyword">this</font> == _empty)
00042             <font class="keywordflow">throw</font> <font class="keyword">new</font> Exceptional(factory.<a class="code" href="classPureFactory.html#a11">makeEmpty</a>());
00043         <font class="keywordflow">return</font> _head;
00044     }
00045 
<a name="l00046"></a><a class="code" href="classListImpl.html#a1">00046</a>     <font class="keyword">public</font> <a class="code" href="interfaceList.html">List</a> <a class="code" href="interfaceList.html#a1">tail</a>()<font class="keyword"> </font>{
00047         <font class="keywordflow">return</font> _tail;
00048     }
00049 
<a name="l00050"></a><a class="code" href="classListImpl.html#a2">00050</a>     <font class="keyword">public</font> <a class="code" href="interfaceList.html">List</a> <a class="code" href="interfaceList.html#a2">insert</a>(<a class="code" href="interfaceDataValue.html">DataValue</a> dataValue)<font class="keyword"> </font>{
00051         <font class="keywordflow">return</font> <font class="keyword">new</font> ListImpl(factory, dataValue, <font class="keyword">new</font> ListImpl(factory, _head, _tail));
00052     }
00053 
<a name="l00054"></a><a class="code" href="classListImpl.html#a3">00054</a>     <font class="keyword">public</font> <a class="code" href="interfaceList.html">List</a> <a class="code" href="interfaceList.html#a3">append</a>(<a class="code" href="interfaceDataValue.html">DataValue</a> dataValue)<font class="keyword"> </font>{
00055         <font class="keywordflow">if</font> (<font class="keyword">this</font> == _empty) 
00056             <font class="keywordflow">return</font> <font class="keyword">new</font> ListImpl(factory, dataValue);
00057         <font class="keywordflow">return</font> <font class="keyword">new</font> ListImpl(factory, _head, _tail.<a class="code" href="interfaceList.html#a3">append</a>(dataValue));
00058     }
00059 
<a name="l00060"></a><a class="code" href="classListImpl.html#a4">00060</a>     <font class="keyword">public</font> <a class="code" href="interfaceList.html">List</a> <a class="code" href="interfaceList.html#a4">concat</a>(<a class="code" href="interfaceList.html">List</a> list)<font class="keyword"> </font>{
00061         <font class="keywordflow">if</font> (list == _empty) 
00062             <font class="keywordflow">return</font> <font class="keyword">this</font>;
00063         <font class="keywordflow">if</font> (<font class="keyword">this</font> == _empty)
00064             <font class="keywordflow">return</font> list;
00065         <font class="keywordflow">return</font> <font class="keyword">new</font> ListImpl(factory, _head, _tail.<a class="code" href="interfaceList.html#a4">concat</a>(list));
00066     }
00067 
<a name="l00068"></a><a class="code" href="classListImpl.html#a5">00068</a>     <font class="keyword">public</font> <a class="code" href="interfaceEmpty.html">Empty</a> <a class="code" href="interfaceDataValue.html#a0">equals</a>(<a class="code" href="interfaceData.html">Data</a> data) throws <a class="code" href="classExceptional.html">Exceptional</a> {
00069         <font class="keywordflow">if</font> (isEmpty()) {
00070             <font class="keywordflow">if</font> (<font class="keyword">this</font> == data)
00071                 <font class="keywordflow">return</font> factory.<a class="code" href="classPureFactory.html#a11">makeEmpty</a>();
00072         } 
00073         <font class="keywordflow">else</font> {
00074             <font class="keywordflow">if</font> (data instanceof <a class="code" href="interfaceList.html">List</a>) 
00075                 <font class="keywordflow">if</font> (_head.<a class="code" href="interfaceDataValue.html#a0">equals</a>(((<a class="code" href="interfaceList.html">List</a>)data).head()) == factory.<a class="code" href="classPureFactory.html#a11">makeEmpty</a>())
00076                     <font class="keywordflow">return</font> _tail.<a class="code" href="interfaceDataValue.html#a0">equals</a>(((<a class="code" href="interfaceList.html">List</a>)data).tail());
00077         }
00078         <font class="keywordflow">throw</font> <font class="keyword">new</font> Exceptional(factory.<a class="code" href="classPureFactory.html#a11">makeEmpty</a>());
00079     }
00080 
<a name="l00081"></a><a class="code" href="classListImpl.html#a6">00081</a>     <font class="keyword">public</font> String toString()<font class="keyword"> </font>{
00082         <font class="keywordflow">if</font> (<font class="keyword">this</font> == _empty)
00083             <font class="keywordflow">return</font> <font class="stringliteral">"[]"</font>;
00084         <font class="keywordflow">if</font> (_tail == _empty)
00085             <font class="keywordflow">return</font> <font class="stringliteral">"["</font> + _head.toString() + <font class="stringliteral">"]"</font>;
00086         <font class="keywordflow">return</font> <font class="stringliteral">"["</font> + _head.toString() + <font class="stringliteral">", "</font> + _tail.toString() + <font class="stringliteral">"]"</font>;
00087     }
00088 
00089 }
</pre></div>

<hr>
<center>
<i>Action Java Compiler Runtime, written by Tijs van der Storm &copy; 2002. </i>
</center>
