<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ActionImpl.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="packages.html">Packages</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>ActionImpl.java</h1><a href="ActionImpl_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 package ajc.data.pure;
00003 
00004 import ajc.*;
00005 import ajc.data.*;
00006 
00007 
00008 <font class="keyword">class </font><a class="code" href="classActionImpl.html">ActionImpl</a> extends <a class="code" href="classDatumImpl.html">DatumImpl</a> implements <a class="code" href="interfaceAction.html">Action</a> {
00009     <font class="keyword">protected</font> <a class="code" href="interfaceEnactable.html">Enactable</a> enactable;
00010 
00011 
00012     <font class="comment">/* Constructors only visible in this package. */</font>
00013     ActionImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable)<font class="keyword"> </font>{
00014         super(factory);
00015         <font class="keyword">this</font>.enactable = enactable;
00016     }
00017 
00018     ActionImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory)<font class="keyword"> </font>{
00019         <font class="keyword">this</font>(factory, null);
00020     }
00021 
00022     <font class="comment">/* From Action. */</font>
00023 
<a name="l00024"></a><a class="code" href="classActionImpl.html#a10">00024</a>     <font class="keyword">public</font> <a class="code" href="interfaceEnactable.html">Enactable</a> <a class="code" href="interfaceAction.html#a0">enactableValue</a>()<font class="keyword"> </font>{
00025         <font class="keywordflow">return</font> enactable;
00026     }
00027 
<a name="l00028"></a><a class="code" href="classActionImpl.html#a11">00028</a>     <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="interfaceAction.html#a1">enact</a>() throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a>, <a class="code" href="classUnfold.html">Unfold</a> {
00029         <font class="keywordflow">return</font> enactable.<a class="code" href="interfaceEnactable.html#a0">enact</a>(factory.<a class="code" href="classPureFactory.html#a11">makeEmpty</a>(), factory.<a class="code" href="classPureFactory.html#a7">makeNoBindings</a>());
00030     }   
00031 
<a name="l00032"></a><a class="code" href="classActionImpl.html#a12">00032</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> <a class="code" href="interfaceAction.html#a2">then</a>(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00033         <font class="keywordflow">return</font> <font class="keyword">new</font> Then(factory, enactable, action.<a class="code" href="interfaceAction.html#a0">enactableValue</a>());
00034     }
<a name="l00035"></a><a class="code" href="classActionImpl.html#a13">00035</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> <a class="code" href="interfaceAction.html#a3">andThen</a>(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00036         <font class="keywordflow">return</font> <font class="keyword">new</font> AndThen(factory, enactable, action.<a class="code" href="interfaceAction.html#a0">enactableValue</a>());
00037     }
<a name="l00038"></a><a class="code" href="classActionImpl.html#a14">00038</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> <a class="code" href="interfaceAction.html#a4">and</a>(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00039         <font class="keywordflow">return</font> <font class="keyword">new</font> And(factory, enactable, action.<a class="code" href="interfaceAction.html#a0">enactableValue</a>());
00040     }
<a name="l00041"></a><a class="code" href="classActionImpl.html#a15">00041</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> <a class="code" href="interfaceAction.html#a5">exceptionally</a>(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00042         <font class="keywordflow">return</font> <font class="keyword">new</font> Exceptionally(factory, enactable, action.<a class="code" href="interfaceAction.html#a0">enactableValue</a>());
00043     }
<a name="l00044"></a><a class="code" href="classActionImpl.html#a16">00044</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> <a class="code" href="interfaceAction.html#a6">andExceptionally</a>(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00045         <font class="keywordflow">return</font> <font class="keyword">new</font> AndExceptionally(factory, enactable, action.<a class="code" href="interfaceAction.html#a0">enactableValue</a>());
00046     }
<a name="l00047"></a><a class="code" href="classActionImpl.html#a17">00047</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> <a class="code" href="interfaceAction.html#a7">otherwise</a>(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00048         <font class="keywordflow">return</font> <font class="keyword">new</font> Otherwise(factory, enactable, action.<a class="code" href="interfaceAction.html#a0">enactableValue</a>());
00049     }
<a name="l00050"></a><a class="code" href="classActionImpl.html#a18">00050</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> <a class="code" href="interfaceAction.html#a8">hence</a>(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00051         <font class="keywordflow">return</font> <font class="keyword">new</font> Hence(factory, enactable, action.<a class="code" href="interfaceAction.html#a0">enactableValue</a>());
00052     }
<a name="l00053"></a><a class="code" href="classActionImpl.html#a19">00053</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> <a class="code" href="interfaceAction.html#a9">indivisibly</a>()<font class="keyword"> </font>{
00054         <font class="keywordflow">return</font> <font class="keyword">new</font> Indivisibly(factory, enactable);
00055     }
00056 
00057     <font class="comment">/* From Runnable */</font>
<a name="l00058"></a><a class="code" href="classActionImpl.html#a20">00058</a>     <font class="keyword">public</font> <font class="keywordtype">void</font> run()<font class="keyword"> </font>{
00059         <font class="keywordflow">try</font> {
00060             <a class="code" href="interfaceData.html">Data</a> result = <a class="code" href="interfaceAction.html#a1">enact</a>();
00061         }
00062         <font class="keywordflow">catch</font> (<a class="code" href="classException.html">Exception</a> e) {
00063             System.out.println(<font class="stringliteral">"Agent exited abnormally."</font>);
00064         }
00065     }
00066 
00067     <font class="comment">/* From equality */</font>
<a name="l00068"></a><a class="code" href="classActionImpl.html#a21">00068</a>     <font class="keyword">public</font> <a class="code" href="interfaceEmpty.html">Empty</a> <a class="code" href="interfaceDataValue.html#a0">equals</a>(<a class="code" href="interfaceData.html">Data</a> data) throws <a class="code" href="classExceptional.html">Exceptional</a> {
00069         <font class="keywordflow">if</font> (data instanceof <a class="code" href="interfaceAction.html">Action</a>)
00070             <font class="keywordflow">if</font> (enactable == ((<a class="code" href="interfaceAction.html">Action</a>)data).enactableValue())
00071                 <font class="keywordflow">return</font> factory.<a class="code" href="classPureFactory.html#a11">makeEmpty</a>();
00072         <font class="keywordflow">throw</font> <font class="keyword">new</font> Exceptional(factory.<a class="code" href="classPureFactory.html#a11">makeEmpty</a>());
00073     }
00074 
00075 }
00076 
00077 
00078 <font class="keyword">class </font><a class="code" href="classThen.html">Then</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
00079     <font class="keyword">private</font> <font class="keyword">class </font>_Then implements <a class="code" href="interfaceEnactable.html">Enactable</a> {
00080         <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a>, <a class="code" href="classUnfold.html">Unfold</a> {
00081             <font class="keywordflow">return</font> enactable2.enact(enactable1.enact(data, bindings), bindings);
00082         }
00083     }
<a name="l00084"></a><a class="code" href="classThen.html#a2">00084</a>     <font class="keyword">public</font> Then(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00085         super(factory, enactable1, enactable2);
00086         enactable = <font class="keyword">new</font> _Then();
00087     }
00088 }
00089 
00090 <font class="keyword">class </font><a class="code" href="classAndThen.html">AndThen</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
00091     <font class="keyword">private</font> <font class="keyword">class </font>_AndThen implements <a class="code" href="interfaceEnactable.html">Enactable</a> {
00092         <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a>, <a class="code" href="classUnfold.html">Unfold</a> {
00093             <a class="code" href="interfaceData.html">Data</a> d1 = enactable1.enact(data, bindings);
00094             <a class="code" href="interfaceData.html">Data</a> d2 = enactable2.enact(data, bindings);
00095             <font class="keywordflow">return</font> d1.<a class="code" href="interfaceData.html#a0">concat</a>(d2);
00096         }
00097     }
<a name="l00098"></a><a class="code" href="classAndThen.html#a2">00098</a>     <font class="keyword">public</font> AndThen(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00099         super(factory, enactable1, enactable2);
00100         enactable = <font class="keyword">new</font> _AndThen();
00101     }
00102 }
00103 
00104 <font class="keyword">class </font><a class="code" href="classAnd.html">And</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
00105     <font class="keyword">private</font> <font class="keyword">class </font>_And implements <a class="code" href="interfaceEnactable.html">Enactable</a> {
00106         <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a>, <a class="code" href="classUnfold.html">Unfold</a> {
00107             <a class="code" href="interfaceData.html">Data</a> d1 = enactable1.enact(data, bindings);
00108             <a class="code" href="interfaceData.html">Data</a> d2 = enactable2.enact(data, bindings);
00109             <font class="keywordflow">return</font> d1.<a class="code" href="interfaceData.html#a0">concat</a>(d2);
00110         }
00111     }
<a name="l00112"></a><a class="code" href="classAnd.html#a2">00112</a>     <font class="keyword">public</font> And(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00113         super(factory, enactable1, enactable2);
00114         enactable = <font class="keyword">new</font> _And();
00115     }
00116 }
00117 
00118 <font class="keyword">class </font><a class="code" href="classExceptionally.html">Exceptionally</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
00119     <font class="keyword">private</font> <font class="keyword">class </font>_Exceptionally implements <a class="code" href="interfaceEnactable.html">Enactable</a> {
00120         <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a>, <a class="code" href="classUnfold.html">Unfold</a> {
00121             <font class="keywordflow">try</font> {
00122                 <font class="keywordflow">return</font> enactable1.enact(data,bindings);
00123             }
00124             <font class="keywordflow">catch</font> (<a class="code" href="classExceptional.html">Exceptional</a> e) {
00125                 <a class="code" href="interfaceData.html">Data</a> d = e.getData();
00126                 <font class="keywordflow">return</font> enactable2.enact(d, bindings);
00127             }
00128         }
00129     }
<a name="l00130"></a><a class="code" href="classExceptionally.html#a2">00130</a>     <font class="keyword">public</font> Exceptionally(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00131         super(factory, enactable1, enactable2);
00132         enactable = <font class="keyword">new</font> _Exceptionally();
00133     }
00134 }
00135 
00136 <font class="keyword">class </font><a class="code" href="classAndExceptionally.html">AndExceptionally</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
00137     <font class="keyword">private</font> <font class="keyword">class </font>_AndExceptionally implements <a class="code" href="interfaceEnactable.html">Enactable</a> {
00138         <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a>, <a class="code" href="classUnfold.html">Unfold</a> {
00139             <font class="keywordflow">try</font> {
00140                 <font class="keywordflow">return</font> enactable1.enact(data,bindings);
00141             }
00142             <font class="keywordflow">catch</font> (<a class="code" href="classExceptional.html">Exceptional</a> e1) {
00143                 <a class="code" href="interfaceData.html">Data</a> d1 = e1.getData();
00144                 <font class="keywordflow">try</font> {
00145                     <font class="keywordflow">return</font> enactable2.enact(data, bindings);
00146                 }
00147                 <font class="keywordflow">catch</font> (<a class="code" href="classExceptional.html">Exceptional</a> e2) {
00148                     <a class="code" href="interfaceData.html">Data</a> d2 = e2.getData();
00149                     <font class="keywordflow">throw</font> <font class="keyword">new</font> Exceptional(d1.<a class="code" href="interfaceData.html#a0">concat</a>(d2));
00150                 }
00151             }
00152         }
00153     }
<a name="l00154"></a><a class="code" href="classAndExceptionally.html#a2">00154</a>     <font class="keyword">public</font> AndExceptionally(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00155         super(factory, enactable1, enactable2);
00156         enactable = <font class="keyword">new</font> _AndExceptionally();
00157     }
00158 }
00159 
00160 <font class="keyword">class </font><a class="code" href="classOtherwise.html">Otherwise</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
00161     <font class="keyword">private</font> <font class="keyword">class </font>_Otherwise implements <a class="code" href="interfaceEnactable.html">Enactable</a> {
00162         <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a>, <a class="code" href="classUnfold.html">Unfold</a> {
00163             <font class="keywordflow">try</font> {
00164                 <font class="keywordflow">return</font> enactable1.enact(data, bindings);
00165             }
00166             <font class="keywordflow">catch</font> (<a class="code" href="classFailed.html">Failed</a> f) {
00167                 <font class="keywordflow">return</font> enactable2.enact(data, bindings);
00168             }
00169         }
00170     }
<a name="l00171"></a><a class="code" href="classOtherwise.html#a2">00171</a>     <font class="keyword">public</font> Otherwise(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00172         super(factory, enactable1, enactable2);
00173         enactable = <font class="keyword">new</font> _Otherwise();
00174     }
00175 }
00176 
00177 <font class="keyword">class </font><a class="code" href="classHence.html">Hence</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
00178     <font class="keyword">private</font> <font class="keyword">class </font>_Hence implements <a class="code" href="interfaceEnactable.html">Enactable</a> {
00179         <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a>, <a class="code" href="classUnfold.html">Unfold</a> {
00180             <font class="keywordflow">return</font> enactable2.enact(data, (<a class="code" href="interfaceBindings.html">Bindings</a>)enactable1.enact(data, bindings));
00181         }
00182     }
<a name="l00183"></a><a class="code" href="classHence.html#a2">00183</a>     <font class="keyword">public</font> Hence(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00184         super(factory, enactable1, enactable2);
00185         enactable = <font class="keyword">new</font> _Hence();
00186     }
00187 }
00188 
00189 
00190 <font class="keyword">class </font><a class="code" href="classIndivisibly.html">Indivisibly</a> extends <a class="code" href="classAbstractPrefixCombinator.html">AbstractPrefixCombinator</a> {
00191     <font class="keyword">private</font> <font class="keyword">class </font>_Indivisibly implements <a class="code" href="interfaceEnactable.html">Enactable</a> {
00192         <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a>, <a class="code" href="classUnfold.html">Unfold</a> {
00193             synchronized (Store.getStore()) {
00194                 <font class="keywordflow">return</font> enactable1.enact(data, bindings);
00195             }
00196         }
00197     }
<a name="l00198"></a><a class="code" href="classIndivisibly.html#a2">00198</a>     <font class="keyword">public</font> Indivisibly(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1)<font class="keyword"> </font>{
00199         super(factory, enactable1);
00200         enactable = <font class="keyword">new</font> _Indivisibly();
00201     }
00202 }
00203 
00204 
</pre></div>

<hr>
<center>
<i>Action Java Compiler Runtime, written by Tijs van der Storm &copy; 2002. </i>
</center>
