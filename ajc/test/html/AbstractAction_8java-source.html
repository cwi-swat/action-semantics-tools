<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>AbstractAction.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="packages.html">Packages</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>AbstractAction.java</h1><a href="AbstractAction_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 package ajc.data.pure;
00003 
00004 import ajc.data.<a class="code" href="interfaceDatum.html">Datum</a>;
00005 import ajc.data.<a class="code" href="interfaceData.html">Data</a>;
00006 import ajc.data.<a class="code" href="interfaceAction.html">Action</a>;
00007 
00008 import ajc.Exceptional;
00009 import ajc.Store;
00010 
<a name="l00011"></a><a class="code" href="classActionImpl.html">00011</a> <font class="keyword">class </font><a class="code" href="classActionImpl.html">ActionImpl</a> extends <a class="code" href="classDatumImpl.html">DatumImpl</a> implements <a class="code" href="interfaceAction.html">Action</a> {
<a name="l00012"></a><a class="code" href="classActionImpl.html#o0">00012</a>     <font class="keyword">private</font> <a class="code" href="interfaceData.html">Data</a> result;
00013     <font class="keyword">private</font> <a class="code" href="interfaceEnactable.html">Enactable</a> enactable;
00014 
00015 
00016     <font class="comment">/* Constructors only visible in this package. */</font>
<a name="l00017"></a><a class="code" href="classActionImpl.html#c0">00017</a>     ActionImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable)<font class="keyword"> </font>{
00018         super(factory);
00019         <font class="keyword">this</font>.enactable = enactable;
00020     }
00021 
<a name="l00022"></a><a class="code" href="classActionImpl.html#c1">00022</a>     ActionImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory)<font class="keyword"> </font>{
00023         <font class="keyword">this</font>(factory, null);
00024     }
00025         
00026     <font class="comment">/* From Action. */</font>
00027 
<a name="l00028"></a><a class="code" href="classActionImpl.html#a0">00028</a>     <font class="keyword">public</font> <a class="code" href="interfaceEnactable.html">Enactable</a> getEnactable()<font class="keyword"> </font>{
00029         <font class="keywordflow">return</font> enactable;
00030     }
00031 
<a name="l00032"></a><a class="code" href="classActionImpl.html#a1">00032</a>     <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="interfaceAction.html#a1">enact</a>()<font class="keyword"> </font>{
00033         <font class="keywordflow">return</font> enactable.<a class="code" href="interfaceEnactable.html#a0">enact</a>(factory.<a class="code" href="classPureFactory.html#a10">makeEmpty</a>(), factory.<a class="code" href="classPureFactory.html#a7">makeNoBindings</a>());
00034     }   
00035 
<a name="l00036"></a><a class="code" href="classActionImpl.html#a2">00036</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> giveThen(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00037         <font class="keywordflow">return</font> <font class="keyword">new</font> Then(factory, enactable, action.getEnactable());
00038     }
<a name="l00039"></a><a class="code" href="classActionImpl.html#a3">00039</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> giveAndThen(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00040         <font class="keywordflow">return</font> <font class="keyword">new</font> AndThen(factory, enactable, action.getEnactable());
00041     }
<a name="l00042"></a><a class="code" href="classActionImpl.html#a4">00042</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> giveAnd(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00043         <font class="keywordflow">return</font> <font class="keyword">new</font> And(factory, enactable, action.getEnactable());
00044     }
<a name="l00045"></a><a class="code" href="classActionImpl.html#a5">00045</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> giveExceptionally(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00046         <font class="keywordflow">return</font> <font class="keyword">new</font> Exceptionally(factory, enactable, action.getEnactable());
00047     }
<a name="l00048"></a><a class="code" href="classActionImpl.html#a6">00048</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> giveAndExceptionally(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00049         <font class="keywordflow">return</font> <font class="keyword">new</font> AndExceptionally(factory, enactable, action.getEnactable());
00050     }
<a name="l00051"></a><a class="code" href="classActionImpl.html#a7">00051</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> giveOtherwise(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00052         <font class="keywordflow">return</font> <font class="keyword">new</font> AndOtherwise(factory, enactable, action.getEnactable());
00053     }
<a name="l00054"></a><a class="code" href="classActionImpl.html#a8">00054</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> giveHence(<a class="code" href="interfaceAction.html">Action</a> action)<font class="keyword"> </font>{
00055         <font class="keywordflow">return</font> <font class="keyword">new</font> Hence(factory, enactable, action.getEnactable());
00056     }
<a name="l00057"></a><a class="code" href="classActionImpl.html#a9">00057</a>     <font class="keyword">public</font> <a class="code" href="interfaceAction.html">Action</a> giveIndivisibly()<font class="keyword"> </font>{
00058         <font class="keywordflow">return</font> <font class="keyword">new</font> Indivisibly(factory, enactable);
00059     }
00060 }
00061 
00062 
<a name="l00063"></a><a class="code" href="classThen.html">00063</a> <font class="keyword">class </font><a class="code" href="classThen.html">Then</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
<a name="l00064"></a><a class="code" href="classThen.html#a0">00064</a>     <font class="keyword">public</font> Then(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00065         super(factory, enactable1, enactable2);
00066     }
<a name="l00067"></a><a class="code" href="classThen.html#a1">00067</a>     <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a> {
00068         <font class="keywordflow">return</font> enactable2.<a class="code" href="interfaceEnactable.html#a0">enact</a>(enactable1.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data, bindings), bindings);
00069     }
00070 }
00071 
<a name="l00072"></a><a class="code" href="classAndThen.html">00072</a> <font class="keyword">class </font><a class="code" href="classAndThen.html">AndThen</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
<a name="l00073"></a><a class="code" href="classAndThen.html#a0">00073</a>     <font class="keyword">public</font> AndThen(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00074         super(factory, enactable1, enactable2);
00075     }
<a name="l00076"></a><a class="code" href="classAndThen.html#a1">00076</a>     <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a> {
00077         <a class="code" href="interfaceData.html">Data</a> d1 = enactable1.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data, bindings);
00078         <a class="code" href="interfaceData.html">Data</a> d2 = enactable2.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data, bindings);
00079         <font class="keywordflow">return</font> d1.merge(d2);
00080     }
00081 }
00082 
<a name="l00083"></a><a class="code" href="classAnd.html">00083</a> <font class="keyword">class </font><a class="code" href="classAnd.html">And</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
<a name="l00084"></a><a class="code" href="classAnd.html#a0">00084</a>     <font class="keyword">public</font> And(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00085         super(factory, enactable1, enactable2);
00086     }
<a name="l00087"></a><a class="code" href="classAnd.html#a1">00087</a>     <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a> {
00088         <a class="code" href="interfaceData.html">Data</a> d1 = enactable1.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data, bindings);
00089         <a class="code" href="interfaceData.html">Data</a> d2 = enactable2.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data, bindings);
00090         <font class="keywordflow">return</font> d1.merge(d2);
00091     }
00092 }
00093 
<a name="l00094"></a><a class="code" href="classExceptionally.html">00094</a> <font class="keyword">class </font><a class="code" href="classExceptionally.html">Exceptionally</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
<a name="l00095"></a><a class="code" href="classExceptionally.html#a0">00095</a>     <font class="keyword">public</font> Exceptionally(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00096         super(factory, enactable1, enactable2);
00097     }
<a name="l00098"></a><a class="code" href="classExceptionally.html#a1">00098</a>     <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a> {
00099         <font class="keywordflow">try</font> {
00100             <font class="keywordflow">return</font> enactable1.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data,bindings);
00101         }
00102         <font class="keywordflow">catch</font> (<a class="code" href="classExceptional.html">Exceptional</a> e) {
00103             <a class="code" href="interfaceData.html">Data</a> d = e.getData();
00104             <font class="keywordflow">return</font> enactable2.<a class="code" href="interfaceEnactable.html#a0">enact</a>(d, bindings);
00105         }
00106     }
00107 }
00108 
<a name="l00109"></a><a class="code" href="classAndExceptionally.html">00109</a> <font class="keyword">class </font><a class="code" href="classAndExceptionally.html">AndExceptionally</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
<a name="l00110"></a><a class="code" href="classAndExceptionally.html#a0">00110</a>     <font class="keyword">public</font> AndExceptionally(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00111         super(factory, enactable1, enactable2);
00112     }
<a name="l00113"></a><a class="code" href="classAndExceptionally.html#a1">00113</a>     <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a> {
00114         <font class="keywordflow">try</font> {
00115             <font class="keywordflow">return</font> enactable1.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data,bindings);
00116         }
00117         <font class="keywordflow">catch</font> (<a class="code" href="classExceptional.html">Exceptional</a> e1) {
00118             <a class="code" href="interfaceData.html">Data</a> d1 = e1.getData();
00119             <font class="keywordflow">try</font> {
00120                 <font class="keywordflow">return</font> enactable2.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data, bindings);
00121             }
00122             <font class="keywordflow">catch</font> (<a class="code" href="classExceptional.html">Exceptional</a> e2) {
00123                 <a class="code" href="interfaceData.html">Data</a> d2 = e2.getData();
00124                 <font class="keywordflow">throw</font> <font class="keyword">new</font> Exceptional(d1.merge(d2));
00125             }
00126         }
00127     }
00128 }
00129 
<a name="l00130"></a><a class="code" href="classOtherwise.html">00130</a> <font class="keyword">class </font><a class="code" href="classOtherwise.html">Otherwise</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
<a name="l00131"></a><a class="code" href="classOtherwise.html#a0">00131</a>     <font class="keyword">public</font> Otherwise(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00132         super(factory, enactable1, enactable2);
00133     }
<a name="l00134"></a><a class="code" href="classOtherwise.html#a1">00134</a>     <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a> {
00135         <font class="keywordflow">try</font> {
00136             <font class="keywordflow">return</font> enactable1.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data, bindings);
00137         }
00138         <font class="keywordflow">catch</font> (<a class="code" href="classFailed.html">Failed</a> f) {
00139             <font class="keywordflow">return</font> enactable2.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data, bindings);
00140         }
00141     }
00142 }
00143 
<a name="l00144"></a><a class="code" href="classHence.html">00144</a> <font class="keyword">class </font><a class="code" href="classHence.html">Hence</a> extends <a class="code" href="classAbstractInfixCombinator.html">AbstractInfixCombinator</a> {
<a name="l00145"></a><a class="code" href="classHence.html#a0">00145</a>     <font class="keyword">public</font> Hence(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable1, <a class="code" href="interfaceEnactable.html">Enactable</a> enactable2)<font class="keyword"> </font>{
00146         super(factory, enactable1, enactable2);
00147     }
<a name="l00148"></a><a class="code" href="classHence.html#a1">00148</a>     <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a> {
00149         <font class="keywordflow">return</font> enactable2.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data, 
00150                                 enactable1.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data, bindings).giveThe(<a class="code" href="interfaceBindings.html">Bindings</a>));
00151     }
00152 }
00153 
00154 
<a name="l00155"></a><a class="code" href="classIndivisibly.html">00155</a> <font class="keyword">class </font><a class="code" href="classIndivisibly.html">Indivisibly</a> extends <a class="code" href="classAbstractPrefixCombinator.html">AbstractPrefixCombinator</a> {
<a name="l00156"></a><a class="code" href="classIndivisibly.html#a0">00156</a>     <font class="keyword">public</font> Indivisibly(<a class="code" href="classPureFactory.html">PureFactory</a> factory, <a class="code" href="interfaceEnactable.html">Enactable</a> action)<font class="keyword"> </font>{
00157         super(factory, action);
00158     }
<a name="l00159"></a><a class="code" href="classIndivisibly.html#a1">00159</a>     <font class="keyword">public</font> <a class="code" href="interfaceData.html">Data</a> <a class="code" href="classActionImpl.html#a1">enact</a>(<a class="code" href="interfaceData.html">Data</a> data, <a class="code" href="interfaceBindings.html">Bindings</a> bindings) throws <a class="code" href="classExceptional.html">Exceptional</a>, <a class="code" href="classFailed.html">Failed</a> {
00160         synchronized (Store.getStore()) {
00161             <font class="keywordflow">return</font> action.<a class="code" href="interfaceEnactable.html#a0">enact</a>(data, bindings);
00162         }
00163     }
00164 }
00165 
00166 
</pre></div><hr><address><small>Generated at Thu Sep 12 20:07:44 2002 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.8.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
