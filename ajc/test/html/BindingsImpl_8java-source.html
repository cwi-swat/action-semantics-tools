<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BindingsImpl.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="packages.html">Packages</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>BindingsImpl.java</h1><a href="BindingsImpl_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 package ajc.data.pure;
00003 
00004 import ajc.*;
00005 import ajc.data.*;
00006 
00007 import java.util.TreeMap;
00008 import java.util.Map;
00009 import java.util.Set;
00010 import java.util.Iterator;
00011 
<a name="l00012"></a><a class="code" href="classBindingsImpl.html">00012</a> <font class="keyword">class </font><a class="code" href="classBindingsImpl.html">BindingsImpl</a> extends <a class="code" href="classDatumImpl.html">DatumImpl</a> implements <a class="code" href="interfaceBindings.html">Bindings</a> {
<a name="l00013"></a><a class="code" href="classBindingsImpl.html#o0">00013</a>     <font class="keyword">private</font> Map bindingMap;
00014 
<a name="l00015"></a><a class="code" href="classBindingsImpl.html#c0">00015</a>     BindingsImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory)<font class="keyword"> </font>{
00016         <font class="keyword">this</font>(factory, <font class="keyword">new</font> TreeMap());
00017     }
00018 
<a name="l00019"></a><a class="code" href="classBindingsImpl.html#c1">00019</a>     <font class="keyword">private</font> BindingsImpl(<a class="code" href="classPureFactory.html">PureFactory</a> factory, Map map)<font class="keyword"> </font>{
00020         super(factory);
00021         bindingMap = map;
00022     }
00023 
<a name="l00024"></a><a class="code" href="classBindingsImpl.html#a0">00024</a>     <font class="keyword">public</font> Map <a class="code" href="interfaceBindings.html#a0">mapValue</a>()<font class="keyword"> </font>{
00025         <font class="keywordflow">return</font> bindingMap;
00026     }
00027 
<a name="l00028"></a><a class="code" href="classBindingsImpl.html#a1">00028</a>     <font class="keyword">public</font> <a class="code" href="interfaceBindings.html">Bindings</a> <a class="code" href="interfaceBindings.html#a1">binding</a>(<a class="code" href="interfaceToken.html">Token</a> token, <a class="code" href="interfaceBindable.html">Bindable</a> bindable)<font class="keyword"> </font>{
00029         Map map = <font class="keyword">new</font> TreeMap();
00030         map.put(token, bindable);
00031         <font class="keywordflow">return</font> <font class="keyword">new</font> BindingsImpl(factory, map);
00032     }
00033 
<a name="l00034"></a><a class="code" href="classBindingsImpl.html#a2">00034</a>     <font class="keyword">public</font> <a class="code" href="interfaceBindable.html">Bindable</a> <a class="code" href="interfaceBindings.html#a2">bound</a>(<a class="code" href="interfaceToken.html">Token</a> token) throws <a class="code" href="classExceptional.html">Exceptional</a> {
00035         <font class="keywordflow">if</font> (bindingMap.containsKey(token))
00036             <font class="keywordflow">return</font> (<a class="code" href="interfaceBindable.html">Bindable</a>)bindingMap.get(token);
00037         <font class="keywordflow">throw</font> <font class="keyword">new</font> Exceptional(factory.<a class="code" href="classPureFactory.html#a10">makeEmpty</a>());
00038     }
00039         
00040 
<a name="l00041"></a><a class="code" href="classBindingsImpl.html#a3">00041</a>     <font class="keyword">public</font> <a class="code" href="interfaceBindings.html">Bindings</a> <a class="code" href="interfaceBindings.html#a3">overriding</a>(<a class="code" href="interfaceBindings.html">Bindings</a> bindings)<font class="keyword"> </font>{
00042         Map newMap = <font class="keyword">new</font> TreeMap(bindingMap);
00043         newMap.putAll(bindings.<a class="code" href="interfaceBindings.html#a0">mapValue</a>());
00044         <font class="keywordflow">return</font> <font class="keyword">new</font> BindingsImpl(factory, newMap);
00045     }
00046 
<a name="l00047"></a><a class="code" href="classBindingsImpl.html#a4">00047</a>     <font class="keyword">public</font> <a class="code" href="interfaceBindings.html">Bindings</a> <a class="code" href="interfaceBindings.html#a4">disjointUnion</a>(<a class="code" href="interfaceBindings.html">Bindings</a> bindings)<font class="keyword"> </font>{
00048         Map newMap = <font class="keyword">new</font> TreeMap(bindingMap);
00049         Set keySet = newMap.keySet();
00050         <font class="keywordflow">for</font> (Iterator i = keySet.iterator(); i.hasNext();) {
00051             <a class="code" href="interfaceToken.html">Token</a> token = (<a class="code" href="interfaceToken.html">Token</a>)i.next();
00052             <font class="keywordflow">if</font> (bindings.<a class="code" href="interfaceBindings.html#a0">mapValue</a>().containsKey(token))
00053                 newMap.remove(token);
00054             <font class="keywordflow">else</font>
00055                 newMap.put(token, bindings.<a class="code" href="interfaceBindings.html#a0">mapValue</a>().get(token));
00056         }
00057         <font class="keywordflow">return</font> <font class="keyword">new</font> BindingsImpl(factory, newMap);
00058     }
00059 
00060 }
</pre></div><hr><address><small>Generated at Thu Sep 12 20:07:44 2002 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.8.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
